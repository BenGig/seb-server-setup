##########################################################
### Global Server Settings

# Server address (set for docker internal)
server.address=0.0.0.0
# Server http port
server.port=8080
# The servlet context path
server.servlet.context-path=/

# Logging
# Default logging level in the form  "logging.level" + namespace=LEVEL 
logging.level.ch=DEBUG
logging.level.ch.ethz.seb.sebserver.webservice.datalayer.batis=WARN
logging.file=/sebserver/log/sebserver.log

##########################################################
### SEB Server Webservice configuration

sebserver.test.property=This is a staging/testing setup with no encryption

# webservice database server connection
datastore.mariadb.server.address=seb-server-mariadb
datastore.mariadb.server.port=3306
# data source configuration
spring.datasource.initialize=true
spring.datasource.initialization-mode=always
spring.datasource.url=jdbc:mariadb://${datastore.mariadb.server.address}:${datastore.mariadb.server.port}/SEBServer?useSSL=false&createDatabaseIfNotExist=true
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.platform=prod
spring.datasource.hikari.initializationFailTimeout=30000
spring.datasource.hikari.connectionTimeout=30000
spring.datasource.hikari.idleTimeout=600000
spring.datasource.hikari.maxLifetime=1800000

# webservice API
sebserver.webservice.api.admin.clientId=guiClient
sebserver.webservice.api.admin.endpoint=/admin-api/v1
sebserver.webservice.api.admin.accessTokenValiditySeconds=3600
sebserver.webservice.api.admin.refreshTokenValiditySeconds=25200
sebserver.webservice.api.exam.config.init.permittedProcesses=config/initialPermittedProcesses.xml
sebserver.webservice.api.exam.config.init.prohibitedProcesses=config/initialProhibitedProcesses.xml
sebserver.webservice.api.exam.endpoint=/exam-api
sebserver.webservice.api.exam.endpoint.discovery=${sebserver.webservice.api.exam.endpoint}/discovery
sebserver.webservice.api.exam.endpoint.v1=${sebserver.webservice.api.exam.endpoint}/v1
sebserver.webservice.api.exam.accessTokenValiditySeconds=3600
sebserver.webservice.api.exam.event-handling-strategy=ASYNC_BATCH_STORE_STRATEGY
sebserver.webservice.api.exam.enable-indicator-cache=true
sebserver.webservice.api.pagination.maxPageSize=500
# comma separated list of known possible OpenEdX API access token request endpoints
sebserver.webservice.lms.openedx.api.token.request.paths=/oauth2/access_token

# NOTE: This is a temporary work-around for SEB Restriction API within Open edX SEB integration plugin to
#       apply on load-balanced infrastructure or infrastructure that has several layers of cache.
#       The reason for this is that the API (Open edX system) internally don't apply a resource-change that is
#       done within HTTP API call immediately from an outside perspective.
#       After a resource-change on the API is done, the system toggles between the old and the new resource
#       while constantly calling GET. This usually happens for about a minute or two then it stabilizes on the new resource
#
#       This may source on load-balancing or internally caching on Open edX side.
#       To mitigate this effect the SEB Server can be configured to apply a resource-change on the
#       API several times in a row to flush as match caches and reach as match as possible server instances.
#
#       Since this is a brute-force method to mitigate the problem, this should only be a temporary
#       work-around until a better solution on Open edX SEB integration side has been found and applied.
sebserver.webservice.lms.openedx.seb.restriction.push-count=10

##########################################################
### SEB Server GUI configuration

sebserver.gui.multilingual=false
sebserver.gui.supported.languages=en
sebserver.gui.entrypoint=/gui
sebserver.gui.webservice.protocol=http
sebserver.gui.webservice.address=localhost
sebserver.gui.webservice.port=8080
# defines the polling interval that is used to poll the webservice for client connection data on a monitored exam page
sebserver.gui.webservice.poll-interval=500
sebserver.gui.webservice.mock-lms-enabled=true
sebserver.gui.theme=css/sebserver.css
sebserver.gui.list.page.size=20
sebserver.gui.date.displayformat=MM/dd/yyyy HH:mm
sebserver.gui.date.displayformat.timezone=|ZZ
sebserver.gui.seb.client.config.download.filename=SEBClientSettings.seb
sebserver.gui.seb.exam.config.download.filename=SEBExamSettings.seb